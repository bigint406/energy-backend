[toc]

## 系统层

### 能源站

#### 1.设备在线率

要用的表的在线率，根据每个点位这个小时在mongo中有无数据进行统计。统计方式为这个小时mongo中原始数据条目数目除以总数（841）

#### 2.报警总数

之后用websocket做

#### 3.锅炉总功率(kW)

这分钟的4个锅炉功率总和(ZLZ.功率采集)

#### 4.总用电能耗累计(kW·h)（今日）

根据结果表“能源站碳排放（当日各小时）”中前几个小时的碳排反推耗能，再加上这个小时的耗能，每分钟更新一次

#### 5.锅炉运行数目

统计（ZLZ.系统运行中i）中为true的数目

#### 6.报警

| 描述                | 参数             |
| ------------------- | ---------------- |
| 蓄热循环泵1报警     | server.ALARM_P1  |
| 蓄热系统补水泵1报警 | server.ALARM_P10 |
| 蓄热系统补水泵2报警 | server.ALARM_P11 |
| 蓄热循环泵2报警     | server.ALARM_P2  |
| 蓄热循环泵3报警     | server.ALARM_P3  |
| 放热循环泵1报警     | server.ALARM_P4  |
| 放热循环泵2报警     | server.ALARM_P5  |
| 放热循环泵3报警     | server.ALARM_P6  |
| 供热水泵1报警       | server.ALARM_P7  |
| 供热水泵2报警       | server.ALARM_P8  |
| 供热水泵3报警       | server.ALARM_P9  |



## 能效分析

### 能源站
#### 1.电锅炉热效率（每小时一个值）
$$ \eta = \frac{Q_1}{Q_2}\times100\% $$
$Q_1$ 是锅炉的总供热量，目前可获得锅炉实际出入水温度，而各流量泵的体积流量是固定的，设为$V(V=137m^3/h)$，且启动时间短，越数秒，可忽略，因此可直接计算$Q_1$。首先计算$\Delta t$内的$Q_1'$
$$ Q_1' = \sum_{i=1}^{4} CpM^i(T^i_{outlet}-T^i_{inlet}) $$
其中$i$代表锅炉编号，$Cp$为水的比热容$4.2×10^3J/(kg•℃)$，$M^i$为$\Delta t$内流经的水的质量，$\rho$为水密度$1.0×10^3kg/m^3$，$\Delta t$为时间间隔
$$ M^i = \left\{
\begin{aligned}
\rho V\Delta t, i号水泵打开 \\
0, i号水泵关闭
\end{aligned}
\right. $$

$Q_2$是锅炉总耗电量，通过功率乘以时间获得

$$Q_2 = \sum_{i=1}^{4}P^i\Delta t$$

| 数据                 | 来源 | 参数                                |
| -------------------- | ---- | ----------------------------------- |
| $T^i_{outlet}$       | opc  | server.锅炉实际出水温度i            |
| $T^i_{inlet}$        | opc  | server.锅炉实际回水温度i            |
| i号水泵开闭          | opc  | server.A泵运行i                     |
| i号水泵开闭          | opc  | server.B泵运行i（锅炉水泵一用一备） |
| i号锅炉功率采集$P^i$ | opc  | server.功率采集i（单位kW）          |

**处理方式：**

* (server.A泵运行i+server.B泵运行i)$\times$(server.锅炉实际出水温度i-server.锅炉实际回水温度i)每$\Delta t$计算一次，并进行累加，在小时末记录一次。该值$\div60\times Cp\rho V$即为$Q_1$
* server.功率采集i 每$\Delta t$采集一次并累加，在小时末乘以$\Delta t\times 60\times 1000$即为$Q_2$（功率单位kW）


#### 2.蓄热水箱热效率（每小时一个值）

$$ \eta = \frac{Q_1}{Q_2}\times100\% $$

$Q_1$ 是整个蓄热过程中向蓄热水箱提供的实际热量，下式中$T$分别为水箱供回水温度，$\rho 和Cp$同上

$$ Q_1=V\rho Cp(T_{inlet}-T_{outlet})\Delta t $$

$V$为水箱体积流量，为大水箱和小水箱流量之和。各水箱流量根据液位变化计算，

$$ V=\frac{\Delta h\times S}{\Delta t} $$

$S$为水箱横截面，目前根据体积除以高度算得。大水箱约为$100m^2(1055m^3/10m)$，小水箱$67.55m^2(405m^3/6m)$。

$Q_2$是向蓄热水箱供应的最大可能能量，下式中$V$为水箱容积（大水箱$1055m^3$，小水箱$405m^3$），$\rho 和Cp$同上

$$ Q_2=V\rho Cp(T_{average.inlet}-T_{initial}) $$

$T_{average.inlet}$为该小时蓄热过程中平均入口温度，$T_{initial}$为该小时蓄热水箱的初始状态的温度

| 数据         | 来源 | 参数              |
| ------------ | ---- | ----------------- |
| $T_{inlet}$  | opc  | server.OUTPUT_T3  |
| $T_{outlet}$ | opc  | server.OUTPUT_T4  |
| 大水箱液位   | opc  | server.OUTPUT_P10 |
| 小水箱液位   | opc  | 目前没有该数据    |

**处理方式：**

* $\Delta $(server.OUTPUT_P10$\times S_大$  + 小水箱液位$\times S_小$) $\times$ (server.OUTPUT_T3 - server.OUTPUT_T4)每$\Delta t$计算一次，每小时最后累加本小时的所有该值，将结果乘以$\rho Cp$即为$Q_1$
* server.OUTPUT_T3每小时第一个值作为$T_{initial}$
* 累加每小时的server.OUTPUT_T3，最后除以累加次数作为$T_{average.inlet}$
* 每小时最后直接计算$Q_2$

#### 3.能源站系统热效率（每小时一个值）

$$ \eta = \frac{Q_1}{Q_2}\times100\% $$

$Q_1$为一次供热管网总供热量，$Q_2$为系统总耗电量，有功电度APGL2+有功电度AZ_1为不含锅炉的总耗电量，再加上1中的$Q_2$即可。

| 数据          | 来源 | 参数                 |
| ------------- | ---- | -------------------- |
| $Q_1$         | opc  | server.RLB_累计热量  |
| 有功电度APGL2 | opc  | server.有功电度APGL2 |
| 有功电度AZ_1  | opc  | server.有功电度AZ_1  |

**处理方式：**

* 这仨都是每小时统计一次，与上一次做差（Q1单位GJ）

####  4.碳排

q*系数，q为耗电量+锅炉功率计算出的耗电

q单位kw

#### 5.负载率

1中Q1除以3600P，P为额定功率，单位为W

### 制冷中心

#### 0.1 制冷机耗电量

功率=3\*相电压\*相电流\*功率因数，三个相电流电压随便选一个，就选第一个

#### 1.制冷机效率

制冷量除以耗电量，制冷量还没拿到

#### 2.制冷机碳排

耗电量乘以系数

### 二次泵站

#### 1.输热比

根据各组团热表得到的瞬时流量(CF)、供回水温度(outT、inT)得出输热量，再用耗电量除以输热量

耗电量:

1、2组团是1、2号泵，3~6组团是5、6号泵，各泵的耗电量分别通过这些opc点位获得：

ZLZ.T有功电度_BPRS1_1

ZLZ.T有功电度_BPRS1_2

ZLZ.T有功电度_BPRS3_1

ZLZ.T有功电度_BPRS3_2

### 太阳能热水

![e2c9a47c12a54c4321f7817df07bbc2](C:\Users\10849\Documents\xuexi\project\课题45\项目文件\楼控数据\太阳能热水展示内容.png)

#### 集热量

集热循环泵:Q=30m³/h，H=30m，N=1.5KW

#### 集热效率

太阳能辐射中P未知

#### 保证率

电加热器功率90kw